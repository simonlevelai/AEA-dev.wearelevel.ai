<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Eve Assist - Local Test Chat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .chat-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .chat-header h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .chat-header p {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .emergency-bar {
            background: #e74c3c;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
        }

        .message.user {
            align-items: flex-end;
        }

        .message.bot {
            align-items: flex-start;
        }

        .message-bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
        }

        .message.user .message-bubble {
            background: #007bff;
            color: white;
        }

        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .input-group {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
        }

        .chat-input input:focus {
            border-color: #007bff;
        }

        .send-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
        }

        .send-button:hover:not(:disabled) {
            background: #0056b3;
        }

        .send-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .typing-indicator {
            display: none;
            padding: 10px;
            font-style: italic;
            color: #666;
        }

        .disclaimer {
            padding: 15px;
            background: #fff3cd;
            color: #856404;
            font-size: 0.8rem;
            text-align: center;
        }

        .quick-questions {
            padding: 10px 20px;
            background: #f8f9fa;
            border-top: 1px solid #e0e0e0;
        }

        .quick-questions h3 {
            font-size: 0.9rem;
            margin-bottom: 10px;
            color: #666;
        }

        .quick-question-btn {
            background: #e9ecef;
            border: none;
            padding: 8px 12px;
            margin: 2px;
            border-radius: 12px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .quick-question-btn:hover {
            background: #dee2e6;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>ðŸŒ¸ Ask Eve Assist</h1>
            <p>Local Test Chat - Gynaecological Health Information</p>
        </div>
        
        <div class="emergency-bar">
            <strong>Emergency Contacts:</strong> 999 | Samaritans: 116 123 | NHS: 111
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-bubble">
                    Hello! I'm Ask Eve Assist, here to help with gynaecological health information from The Eve Appeal. I provide evidence-based information and can direct you to appropriate support services.
                    <br><br>
                    <strong>Please note:</strong> This is a local test version. I provide general health information only - always consult healthcare professionals for personal medical advice.
                    <br><br>
                    How can I help you today?
                </div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            Ask Eve is thinking...
        </div>

        <div class="quick-questions">
            <h3>Quick Questions:</h3>
            <button class="quick-question-btn" onclick="sendMessage('What are the symptoms of ovarian cancer?')">Ovarian cancer symptoms</button>
            <button class="quick-question-btn" onclick="sendMessage('When should I get cervical screening?')">Cervical screening</button>
            <button class="quick-question-btn" onclick="sendMessage('What is HPV?')">HPV information</button>
            <button class="quick-question-btn" onclick="sendMessage('I need support services')">Support services</button>
        </div>

        <div class="disclaimer">
            <strong>Important:</strong> This provides general health information only and should not replace professional medical advice. Always consult your healthcare provider for medical concerns.
        </div>

        <div class="chat-input">
            <div class="input-group">
                <input type="text" id="messageInput" placeholder="Ask me about gynaecological health..." onkeypress="handleKeyPress(event)">
                <button class="send-button" id="sendButton" onclick="sendUserMessage()">Send</button>
            </div>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendUserMessage();
            }
        }

        function sendMessage(text) {
            messageInput.value = text;
            sendUserMessage();
        }

        async function sendUserMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message to chat
            addMessage('user', message);
            messageInput.value = '';
            sendButton.disabled = true;
            showTyping();

            try {
                // Simulate the Azure OpenAI call like our test script
                const response = await simulateAskEveResponse(message);
                
                setTimeout(() => {
                    addMessage('bot', response);
                    hideTyping();
                    sendButton.disabled = false;
                    messageInput.focus();
                }, 1000 + Math.random() * 2000); // Simulate 1-3 second response time

            } catch (error) {
                console.error('Chat error:', error);
                addMessage('bot', 'I apologize, but I\'m experiencing technical difficulties. Please try again or contact The Eve Appeal directly for immediate assistance.');
                hideTyping();
                sendButton.disabled = false;
                messageInput.focus();
            }
        }

        function simulateAskEveResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Crisis detection
            if (lowerMessage.includes('hopeless') || lowerMessage.includes('end my life') || 
                lowerMessage.includes('kill myself') || lowerMessage.includes('suicide') ||
                lowerMessage.includes('dark thoughts') || lowerMessage.includes('giving up')) {
                return `I'm very concerned about what you've shared with me. Your safety and wellbeing are the most important thing right now.

**Please reach out for immediate support:**
â€¢ **Emergency Services: 999**
â€¢ **Samaritans: 116 123** (free, 24/7 helpline)
â€¢ **Crisis Text Line: Text SHOUT to 85258**  
â€¢ **NHS 111: For urgent mental health support**

You don't have to go through this alone. There are people who want to help and support you. Please speak to someone who can provide the care you need right now.

If you're having thoughts of self-harm, please contact emergency services immediately.`;
            }
            
            // Medical information responses
            if (lowerMessage.includes('ovarian cancer') || lowerMessage.includes('ovarian')) {
                return `Ovarian cancer can be difficult to detect early because symptoms are often vague and can resemble other conditions. 

**Common symptoms may include:**
â€¢ Persistent bloating that doesn't come and go
â€¢ Feeling full quickly when eating
â€¢ Pelvic or abdominal pain
â€¢ Needing to urinate more frequently
â€¢ Changes in bowel habits
â€¢ Extreme fatigue
â€¢ Unexpected weight loss

**Important:** These symptoms are common and often caused by other conditions. However, if you experience them persistently (especially if they're new for you and occur more than 12 times a month), it's important to see your GP.

**Please consult your healthcare provider** for proper evaluation of any concerning symptoms. Early detection saves lives.

For more information, visit The Eve Appeal: https://eveappeal.org.uk`;
            }
            
            if (lowerMessage.includes('cervical screening') || lowerMessage.includes('pap smear') || lowerMessage.includes('smear test')) {
                return `Cervical screening (smear test) is a vital health check that can prevent cervical cancer by detecting early changes in cervical cells.

**NHS Screening Guidelines:**
â€¢ **Ages 25-49:** Every 3 years
â€¢ **Ages 50-64:** Every 5 years  
â€¢ **Over 65:** Only if recent tests were abnormal

**The process:**
â€¢ Takes just a few minutes during a routine appointment
â€¢ A small sample of cells is taken from your cervix
â€¢ Results usually available within 2 weeks

**If you're due:** Contact your GP practice to book an appointment. Don't delay - it could save your life.

**Remember:** Screening is for people without symptoms. If you have unusual bleeding, pain, or discharge, see your GP right away regardless of when your last screening was.

For more information: https://eveappeal.org.uk`;
            }
            
            if (lowerMessage.includes('hpv') || lowerMessage.includes('human papillomavirus')) {
                return `Human Papillomavirus (HPV) is a very common group of viruses. Most people will get some type of HPV in their lifetime.

**Key facts about HPV:**
â€¢ There are over 200 types of HPV
â€¢ About 40 types affect the genital area
â€¢ Types 16 and 18 cause about 70% of cervical cancers
â€¢ Types 6 and 11 cause about 90% of genital warts

**HPV and cervical cancer:**
â€¢ High-risk HPV types can cause cervical cells to become abnormal
â€¢ Over time, these abnormal cells may develop into cancer
â€¢ This process usually takes many years
â€¢ Regular cervical screening can detect changes early

**Protection:**
â€¢ HPV vaccination (offered to all young people)
â€¢ Regular cervical screening
â€¢ Safer sex practices

**Remember:** Having HPV doesn't mean you'll get cancer. Most HPV infections clear up naturally. Regular screening is your best protection.

Always discuss any concerns with your healthcare provider.`;
            }
            
            if (lowerMessage.includes('irregular bleeding') || lowerMessage.includes('bleeding between periods')) {
                return `Irregular bleeding can be concerning, and I understand your worry. There are many possible causes, ranging from hormonal changes to more serious conditions.

**Common causes include:**
â€¢ Hormonal fluctuations
â€¢ Contraceptive methods (especially when starting new ones)
â€¢ Stress or significant weight changes
â€¢ Polyps or fibroids
â€¢ Infections
â€¢ Sometimes, more serious conditions

**When to see your GP:**
â€¢ Bleeding between periods
â€¢ Bleeding after sex
â€¢ Bleeding after menopause
â€¢ Periods that are much heavier or lighter than usual
â€¢ Periods that last much longer than usual

**Important:** Don't wait to see if it settles down on its own. Irregular bleeding should always be checked by a healthcare professional to rule out serious causes and get appropriate treatment.

Please book an appointment with your GP as soon as possible for proper evaluation and peace of mind.

Remember: Early detection and treatment of any underlying issues is always better.`;
            }
            
            if (lowerMessage.includes('support') || lowerMessage.includes('help') || lowerMessage.includes('services')) {
                return `I'm here to provide information, and there are many support services available for gynaecological health concerns:

**The Eve Appeal Support:**
â€¢ Information and awareness about gynaecological cancers
â€¢ Educational resources
â€¢ Website: https://eveappeal.org.uk

**Healthcare Services:**
â€¢ **Your GP:** First point of contact for health concerns
â€¢ **NHS 111:** For non-emergency health advice (dial 111)
â€¢ **Family Planning Clinics:** For reproductive health services

**Mental Health Support:**
â€¢ **Samaritans:** 116 123 (free, 24/7)
â€¢ **Mind:** Information and support for mental health
â€¢ **Your GP:** Can refer you to counseling services

**Cancer Support (if relevant):**
â€¢ **Macmillan Cancer Support:** 0808 808 00 00
â€¢ **Cancer Research UK:** Information and support
â€¢ **Local cancer support groups**

**Remember:** You're not alone. There are healthcare professionals and support services ready to help with any concerns you may have.

Is there a specific type of support you're looking for?`;
            }
            
            // Default response
            return `Thank you for your question. While I can provide general information about gynaecological health topics, I'd recommend speaking with a healthcare professional for personalized advice about your specific situation.

**For reliable information, you can:**
â€¢ Contact your GP for medical concerns
â€¢ Visit The Eve Appeal website: https://eveappeal.org.uk
â€¢ Call NHS 111 for health guidance
â€¢ Book a cervical screening if you're due

**Common topics I can help with:**
â€¢ Cervical, ovarian, womb, vulval, and vaginal health
â€¢ Screening and prevention information  
â€¢ Understanding symptoms and when to seek help
â€¢ Support services available

What specific aspect of gynaecological health would you like to know more about?`;
        }

        function addMessage(sender, text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const bubbleDiv = document.createElement('div');
            bubbleDiv.className = 'message-bubble';
            bubbleDiv.innerHTML = text.replace(/\n/g, '<br>');
            
            messageDiv.appendChild(bubbleDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            typingIndicator.style.display = 'block';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        // Focus on input when page loads
        messageInput.focus();
    </script>
</body>
</html>